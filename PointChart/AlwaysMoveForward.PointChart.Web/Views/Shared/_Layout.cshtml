@using AlwaysMoveForward.PointChart.Web
@using AlwaysMoveForward.PointChart.Web.Code.Utilities;
@using AlwaysMoveForward.PointChart.Web.Code.Extensions;
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
    <head runat="server">
        <title>@ViewBag.Title</title>
        <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
        <script src="@Url.Content("~/Scripts/jquery-1.9.1.js")" type="text/javascript"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular-resource.js"></script>
        <script src="@Url.Content("~/Scripts/Modules/ServiceDefinitionModule.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.form.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/Common/SiteCommon.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/Common/SiteLogin.js")" type="text/javascript"></script>

        @if (MvcApplication.SiteInfo.SiteAnalyticsId != null && MvcApplication.SiteInfo.SiteAnalyticsId != "")
        { 
            <script type="text/javascript">
                var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
                document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
            </script>
            <script type="text/javascript">
                try {
                    var pageTracker = _gat._getTracker("@MvcApplication.SiteInfo.SiteAnalyticsId.ToString()");
                    pageTracker._trackPageview();
                } catch (err) { }
            </script>
        }
        <link href="@Url.Content("~/Content/Themes/Site.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/Content/Themes/Pager.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/Content/Themes/TabControl.css")" rel="stylesheet" type="text/css" />
        @RenderSection("headerPlugins", false)
    </head>
    <body>
        <div class="subBody">
            <div class="header">
                <div id="loginSection">
                    @Html.Partial("_UserLoginControl", String.Empty)
                </div>
                <div class="headerImageSection">
                    <div class="siteTitleSection">
    		            <a href="http://@HttpContext.Current.Request.Url.Authority" class="siteTitle"><h1>Point Chart</h1></a>        
                    </div>
                </div>
            </div>
            @{
                AlwaysMoveForward.PointChart.BusinessLayer.Utilities.SecurityPrincipal currentPrinciapl = HttpContext.Current.User as AlwaysMoveForward.PointChart.BusinessLayer.Utilities.SecurityPrincipal;

                if (currentPrinciapl != null)
                {
                    if (currentPrinciapl.IsAuthenticated == true)
                    {
                        TabElements tabElements = new TabElements();
                        tabElements.Add("Home", "/Home/Index");
//                        tabElements.Add("Charts", "/Chart/Index");
                        tabElements.Add("Tasks", "/Task/Index");
                        tabElements.Add("Point Earners", "/PointEarner/Index");
                        tabElements.SetSelectedTab(this.Request.Url);
                        Html.RenderPartial("_TabControl", tabElements);
                    }
                }
            }
            <div class="contentPanel">
                @RenderBody()
            </div>    
        </div>
    </body>
</html>

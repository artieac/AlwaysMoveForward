@model AlwaysMoveForward.PointChart.Web.Models.TaskModel
@using AlwaysMoveForward.PointChart.DataLayer.Entities;           
@{
    ViewBag.Title = "Charts";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section headerPlugins
{
    <script src="@Url.Content("~/Scripts/Charts/Task.js")" type="text/javascript"></script>
}
<form id="addTaskForm" action="/Task/Add" method="post">
    <input type="hidden" name="addTaskName" id="addTaskName" value="" />
    <input type="hidden" id="addTaskPoints" name="addTaskPoints" />
    <input type="hidden" id="addTaskMaxPerDay" name="addTaskMaxPerDay" />
</form>
<form id="editTaskForm" action="/Task/Edit" method="post">
    <input type="hidden" id="editTaskId" name="editTaskId" value="" />
    <input type="hidden" name="editTaskName" id="editTaskName" value="" />
    <input type="hidden" id="editTaskPoints" name="editTaskPoints" />
    <input type="hidden" id="editTaskMaxPerDay" name="editTaskMaxPerDay" />
</form>
<table class="tableBase">
    <thead>
        <tr class="tableHeader">
            <td width="1%">&nbsp;</td>
            <td width="20%">Name</td>
            <td width="20%">Points</td>
            <td width="20%">Max Per Day</td>
            <td>Action</td>
        </tr>
    </thead>
    <tbody>
    @{
        int rowCounter = 0;

        foreach (Task taskItem in Model.Tasks)
        {
            if (rowCounter % 2 == 0)
            {
                <text><tr class='tableRow1'></text>
            }
            else
            {
                <text><tr class='tableRow2'></text>
            }

            rowCounter++;
            String taskRoot = "task" + @taskItem.Id + "Element";
            String taskName = taskRoot + "Name";
            String taskPoints = taskRoot + "Points";
            String taskMaxPerDay = taskRoot + "MaxPerDay";
            String taskSaveButton = taskRoot + "SaveButton";                        
            <td><input type="radio" name="selectedTask" onclick="Task.HandleSelection('@taskItem.Id');"/></td>
            <td><input type="text" id="@taskName" name="@taskName" class="readonly" value="@taskItem.Name" disabled="true"/></td>
            <td><input type="text" id="@taskPoints" name="@taskPoints" class="readonly" value="@taskItem.Points" disabled="true"/></td>
            <td><input type="text" id="@taskMaxPerDay" name="@taskMaxPerDay" class="readonly" value="@taskItem.MaxAllowedDaily" disabled="true"/></td>
            <td>
                <a href="/Task/Delete?chartId=@taskItem.Id"><img src="@Url.Content("~/Content/images/action_delete.png")" class="deleteList" alt=""/></a>
                <a id="@taskSaveButton" name="@taskSaveButton" class="readonly hidden" onclick="Task.SaveEdit(@taskItem.Id);"><img src="@Url.Content("/Content/images/save.png")" alt=""/></a>
            </td>
            @Html.Raw("</tr>")
        }
        <tr>
            <td>&nbsp;</td>
            <td><input type="text" id="newTaskName" name="newTaskName" /></td>
            <td><input type="text" id="newTaskPoints" name="newTaskPoints" /></td>
            <td><input type="text" id="newTaskMaxPerDay" name="newTaskMaxPerDay" /></td>
            <td><input type="button" id="saveTask" value="Add Task" onclick="Task.Add();"/></td>
        </tr>
    }
    </tbody>
</table>




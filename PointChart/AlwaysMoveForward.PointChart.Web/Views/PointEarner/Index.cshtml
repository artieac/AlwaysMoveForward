@using AMF = AlwaysMoveForward.PointChart.Common.DomainModel;
@{
    ViewBag.Title = "Point Earners";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section headerPlugins
{
    <script src="@Url.Content("~/Scripts/Controllers/PointEarnerController.js")" type="text/javascript"></script>
}
<br />
<div class="bodyContent" ng-controller="PointEarnerController">
    <table class="tableBase">
        <thead>
            <tr class="tableHeader">
                <td>First Name</td>
                <td>Last Name</td>
                <td>Email</td>
                <td>Points Earned</td>
                <td>Points Spent</td>
                <td>Action</td>
            </tr>
        </thead>
        <tbody>
        <tbody ng-init="getAllPointEarners();">
            <tr ng-repeat="pointEarner in pointEarners" ng-class-even="tableRow1" ng-class-odd="tablerow2">
                <td><input type="text" name="firstName" value="{{ pointEarner.FirstName }}" ng-model="pointEarner.FirstName" ng-blur="updatePointEarner(pointEarner)"/></td>
                <td><input type="text" name="lastName" value="{{ pointEarner.LastName }}" ng-model="pointEarner.LastName" ng-blur="updatePointEarner(pointEarner)" /></td>
                <td><input type="text" name="email" value="{{ pointEarner.Email }}" ng-model="pointEarner.Email" ng-blur="updatePointEarner(pointEarner)" /></td>
                <td>{{ pointEarner.PointsEarned }}</td>
                <td><a href="/PointEarner/PointsDetail/{{pointEarner.Id}}">{{ pointEarner.TotalPointsSpent}}</a></td>
                <td>
                    <a class="readonly" ng-click="delete('{{ pointEarner.Id }}');">
                        <img src="/Content/images/action_delete.png" class="deleteList" alt="" />
                    </a>
                </td>
            </tr>
            <tr ng-form="newPointEarnerForm">
                <td><input type="text" name="firstName" ng-model="newPointEarner.firstName" required /></td>
                <td><input type="text" name="lastName" ng-model="newPointEarner.lastName" required /></td>
                <td><input type="text" name="email" ng-model="newPointEarner.email" required /></td>
                <td><input type="button" value="Add Item" ng-disabled="newPointEarner.$invalid" ng-click="addPointEarner();" /></td>
            </tr>
        </tbody>
    </table>
</div>    

@model AlwaysMoveForward.AnotherBlog.Web.Areas.Admin.Models.BlogListModel
@using AlwaysMoveForward.AnotherBlog.Common.DomainModel;
@using AlwaysMoveForward.AnotherBlog.Web.Code.Extensions;
@using AlwaysMoveForward.AnotherBlog.Web.Code.Utilities;
@{
    Layout = "~/Areas/Admin/Views/Shared/_BlogLayout.cshtml";
    ViewBag.Common = Model.Common;
 }

@section headerPlugins
{
    <script src="/Scripts/Admin/ManageBlogLists.js" type="text/javascript"></script>
}
   
@{
    Dictionary<String, String> readonlyAttributes = new Dictionary<string, string>();
    readonlyAttributes.Add("class", "readonly");
    readonlyAttributes.Add("disabled", "true");
    
} 
<form id="adminForm" action="/Admin/List/Index">
    <input type="hidden" id="blogSubFolder" name="blogSubFolder" value="@Model.Common.TargetBlog.SubFolder" />
    <input type="hidden" id="performSave" name="performSave" value="true" />        
</form>
<form id="editBlogListForm" action="/Admin/List/EditList" method="post">
    <input type="hidden" id="blogSubFolder" name="blogSubFolder" value="@Model.Common.TargetBlog.SubFolder"/>
    <input type="hidden" id="listId" name="listId" value="" />
    <input type="hidden" id="listName" name="listName" value="" />
    <input type="hidden" id="showOrdered" name="showOrdered" value="" />
</form>
<form id="showBlogListForm" action="/Admin/List/ShowList" method="post">
    <input type="hidden" id="Hidden2" name="blogSubFolder" value="@Model.Common.TargetBlog.SubFolder" />
    <input type="hidden" id="blogListId" name="blogListId" value="" />
</form>
<div class="bodyContent">        
    <div class="contentPageTitle">
        <label>Manage Lists</label>
    </div> 
    <form id="addBlogList" action="/Admin/List/AddList" method=post>
        <input type="hidden" id="Hidden1" name="blogSubFolder" value="@Model.Common.TargetBlog.SubFolder" />
        <input type="hidden" name="performSave" value="true" />
        <table>
            <thead>
                <tr>
                    <th width="1%">&nbsp;</th>
                    <th width="20%">Name</th>
                    <th width="5%">Show Ordered</th>
                    <th width="10%">&nbsp;</th>
                </tr>
            </thead>
            <tbody>
            @{
                int rowCounter = 0;

                foreach (BlogList blogList in ViewData.Model.BlogLists)
                {
                    if (rowCounter % 2 == 0)
                    {
                        <text><tr class='tableRow1'></text>
                    }
                    else
                    {
                       <text><tr class='tableRow2'></text>
                    }

                    rowCounter++;

                    String blogListName = "blogListName" + @blogList.Id;
                    String blogListShowOrdered = "blogListShowOrdered" + @blogList.Id;
                    String blogListSaveButton = "blogListSaveButton_" + @blogList.Id;
                    <td><input type="radio" name="selectedList" onclick="ManageBlogLists.HandleBlogListSelection('@blogList.Id');"/></td>
                    <td><input type="text" id="@blogListName" name="@blogListName" class="readonly" value="@blogList.Name" disabled="true"/></td>
                    <td>@Html.CheckBox(blogListShowOrdered, blogList.ShowOrdered, readonlyAttributes)</td>
                    <td><a class="readonly" href="/Admin/List/DeleteList?listId=@blogList.Id&blogSubFolder=@Model.Common.TargetBlog.SubFolder"><img src="/Content/images/action_delete.png" class="deleteList" alt=""/></a><input type="button" name="@blogListSaveButton" class="readonly hidden" value="Save" onclick="ManageBlogLists.SaveBlogList(@blogList.Id);"/></td>
                    @Html.Raw("</tr>")
                }
            }
            <tr>
                <td><input type="radio" name="selectedList" onclick="ManageBlogLists.HandleBlogListSelection('-1');"/></td>
                <td><input type="text" name="newListName"/></td>
                <td>@Html.CheckBox("newListShowOrdered", false)</td>                            
                <td><input type="submit" value="Add List" /></td> 
            </tr>
            </tbody>
        </table>
    </form>
    <div id="listItemsContainer">
    </div>      
</div>



@model AlwaysMoveForward.AnotherBlog.Web.Areas.Admin.Models.ManageBlogModel
@using AlwaysMoveForward.AnotherBlog.Common.DomainModel;
@using AlwaysMoveForward.AnotherBlog.Web.Models.BlogModels;
@using AlwaysMoveForward.AnotherBlog.Web.Code.Extensions;
@{
    Layout = "~/Areas/Admin/Views/Shared/_BlogLayout.cshtml";
    ViewBag.Common = Model.Common;
 }
 @section headerPlugins
 {
    <script src="/Scripts/Admin/ManageBlogPosts.js" type="text/javascript"></script>
 }
    <form id="adminForm" action="/Admin/ManageBlog/ManagePosts">
        <input type="hidden" id="blogSubFolder" name="blogSubFolder" value="@Model.Common.TargetBlog.SubFolder" />
        <input type="hidden" id="performSave" name="performSave" value="true" />        
    </form>
    <div class="bodyContent">        
        <div class="contentPageTitle">
            <label>Manage Blog Posts</label>
        </div> 
        <div>
            <a href="/Admin/ManageBlog/EditPost?blogSubFolder=@Model.Common.TargetBlog.SubFolder %>">Write new post</a>
            <table>
                <thead>
                    <tr>
                        <th width="40%"><a href="/Admin/ManageBlog/ManagePosts?blogSubFolder=@Model.Common.TargetBlog.SubFolder&sortColumn=Title&sortAscending=@Model.Common.SortAscending">Title</a></th>
                        <th width="20%"><a href="/Admin/ManageBlog/ManagePosts?blogSubFolder=@Model.Common.TargetBlog.SubFolder&sortColumn=Author&sortAscending=@Model.Common.SortAscending">Author</a></th>
                        <th width="10%"><a href="/Admin/ManageBlog/ManagePosts?blogSubFolder=@Model.Common.TargetBlog.SubFolder&sortColumn=DateCreated&sortAscending=@Model.Common.SortAscending">Date Created</a></th>
                        <th width="5%"><a href="/Admin/ManageBlog/ManagePosts?blogSubFolder=@Model.Common.TargetBlog.SubFolder&sortColumn=IsPublished&sortAscending=@Model.Common.SortAscending">Is Published</a></th>
                        <th width="10%"><a href="/Admin/ManageBlog/ManagePosts?blogSubFolder=@Model.Common.TargetBlog.SubFolder&sortColumn=DatePosted&sortAscending=@Model.Common.SortAscending">Date Posted</a></th>
                        <th width="5%"><a href="/Admin/ManageBlog/ManagePosts?blogSubFolder=@Model.Common.TargetBlog.SubFolder&sortColumn=TimesViewed&sortAscending=@Model.Common.SortAscending">Times Viewed</a></th>
                        <th width="5%">Comments</th>
                        <th width="5%">Action</th>
                    </tr>
                </thead>
                @{ 
                    int rowCounter = 0;

                    foreach (BlogPostModel blogPost in Model.EntryList)
                    {
                        if (rowCounter % 2 == 0)
                        {
                               <text><tr class='tableRow1'></text>
                        }
                        else
                        {
                               <text><tr class='tableRow2'></text>
                        }

                        rowCounter++;

                    <td>@blogPost.Post.Title</td>
                    <td>@blogPost.Author.DisplayName</td>
                    <td>@blogPost.Post.DateCreated</td>
                    <td>@blogPost.Post.IsPublished</td>
                    <td>@blogPost.Post.DatePosted</td>
                    <td>@blogPost.Post.TimesViewed</td>
                    <td>@blogPost.Post.CommentCount.ToString()</td>
                    <td><a href="/Admin/ManageBlog/EditPost?entryId=@blogPost.Post.EntryId&blogSubFolder=@Model.Common.TargetBlog.SubFolder">edit</a></td>
                    @Html.Raw("</tr>");
                    }
            }
            </table>
            <div class="pager">    
                @Html.Pager(@Model.EntryList.PageSize, @Model.EntryList.PageNumber, @Model.EntryList.TotalItemCount, "ManagePosts", new { blogSubFolder = @Model.Common.TargetBlog.SubFolder, sortColumn = @Model.Common.SortColumn, sortAscending = @Model.Common.SortAscending })
            </div>
            <a href="/Admin/ManageBlog/EditPost?blogSubFolder=@Model.Common.TargetBlog.SubFolder">Write new post</a>
        </div>
    </div>
</asp:Content>